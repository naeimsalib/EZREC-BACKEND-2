dual_recorder logs
Aug 05 20:24:08 raspberrypi python3[341358]: 2025-08-05 20:24:08,880 - INFO - ✅ Both camera recordings completed
Aug 05 20:24:08 raspberrypi python3[341358]: 2025-08-05 20:24:08,880 - INFO - 🎬 Using enhanced merge for 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4 and 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 20:24:08 raspberrypi python3[341358]: 2025-08-05 20:24:08,880 - INFO - 🔧 Merge method: side_by_side
Aug 05 20:24:08 raspberrypi python3[341358]: 2025-08-05 20:24:08,881 - INFO - 🔧 Distortion correction: enabled
Aug 05 20:24:09 raspberrypi python3[341358]: 2025-08-05 20:24:09,041 - WARNING - ⚠️ Video 1 validation failed: Invalid MP4 header (missing ftyp)
Aug 05 20:24:09 raspberrypi python3[341358]: WARNING: ⚠️ Video 1 validation failed: Invalid MP4 header (missing ftyp)
Aug 05 20:24:09 raspberrypi python3[341358]: 2025-08-05 20:24:09,041 - INFO - 🔧 Attempting to repair MP4 file: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4
Aug 05 20:24:27 raspberrypi python3[341358]: 2025-08-05 20:24:27,221 - INFO - 🧪 Repair FFmpeg stderr:
Aug 05 20:24:27 raspberrypi python3[341358]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 20:24:27 raspberrypi python3[341358]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 20:24:27 raspberrypi python3[341358]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 20:24:27 raspberrypi python3[341358]:   WARNING: library configuration mismatch
Aug 05 20:24:27 raspberrypi python3[341358]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 20:24:27 raspberrypi python3[341358]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 20:24:27 raspberrypi python3[341358]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 20:24:27 raspberrypi python3[341358]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 20:24:27 raspberrypi python3[341358]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 20:24:27 raspberrypi python3[341358]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 20:24:27 raspberrypi python3[341358]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 20:24:27 raspberrypi python3[341358]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 20:24:27 raspberrypi python3[341358]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 20:24:27 raspberrypi python3[341358]: Input #0, h264, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4':
Aug 05 20:24:27 raspberrypi python3[341358]:   Duration: N/A, bitrate: N/A
Aug 05 20:24:27 raspberrypi python3[341358]:   Stream #0:0: Video: h264 (Constrained Baseline), yuv420p(progressive), 1920x1080, 30 fps, 30 tbr, 1200k tbn
Aug 05 20:24:27 raspberrypi python3[341358]: Stream mapping:
Aug 05 20:24:27 raspberrypi python3[341358]:   Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))
Aug 05 20:24:27 raspberrypi python3[341358]: Press [q] to stop, [?] for help
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] using cpu capabilities: ARMv8 NEON
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] profile Constrained Baseline, level 4.0, 4:2:0, 8-bit
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] 264 - core 164 r3095 baee400 - H.264/MPEG-4 AVC codec - Copyleft 2003-2022 - http://www.videolan.org/x264.html - options: cabac=0 ref=1 deblock=0:0:0 analyse=0:0 me=dia subme=0 psy=1 psy_rd=1.00:0.00 mixed_ref=0 me_range=16 chroma_me=1 trellis=0 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=0 threads=6 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=250 keyint_min=25 scenecut=0 intra_refresh=0 rc=crf mbtree=0 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=0
Aug 05 20:24:27 raspberrypi python3[341358]: Output #0, mp4, to '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.repaired.mp4':
Aug 05 20:24:27 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:27 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:27 raspberrypi python3[341358]:   Stream #0:0: Video: h264 (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, q=2-31, 30 fps, 15360 tbn
Aug 05 20:24:27 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:27 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:27 raspberrypi python3[341358]:     Side data:
Aug 05 20:24:27 raspberrypi python3[341358]:       cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
Aug 05 20:24:27 raspberrypi python3[341358]: frame=    1 fps=0.0 q=0.0 size=       0kB time=00:00:00.00 bitrate=N/A speed=   0x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=   51 fps=0.0 q=16.0 size=     512kB time=00:00:01.43 bitrate=2926.4kbits/s speed=2.79x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  102 fps=100 q=15.0 size=    1280kB time=00:00:03.13 bitrate=3346.6kbits/s speed=3.06x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  152 fps= 99 q=16.0 size=    2048kB time=00:00:04.80 bitrate=3495.3kbits/s speed=3.14x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  202 fps= 99 q=16.0 size=    2816kB time=00:00:06.46 bitrate=3567.3kbits/s speed=3.18x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  252 fps= 99 q=15.0 size=    3584kB time=00:00:08.13 bitrate=3609.9kbits/s speed= 3.2x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  301 fps= 99 q=16.0 size=    4352kB time=00:00:09.76 bitrate=3650.3kbits/s speed=3.21x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  352 fps= 99 q=16.0 size=    5120kB time=00:00:11.46 bitrate=3657.8kbits/s speed=3.23x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  401 fps= 99 q=15.0 size=    5888kB time=00:00:13.10 bitrate=3682.0kbits/s speed=3.23x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  452 fps= 99 q=16.0 size=    6656kB time=00:00:14.80 bitrate=3684.2kbits/s speed=3.24x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  501 fps= 99 q=16.0 size=    7168kB time=00:00:16.43 bitrate=3573.3kbits/s speed=3.24x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  551 fps= 99 q=16.0 size=    8192kB time=00:00:18.10 bitrate=3707.7kbits/s speed=3.24x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  601 fps= 99 q=16.0 size=    8960kB time=00:00:19.76 bitrate=3713.3kbits/s speed=3.25x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  651 fps= 99 q=16.0 size=    9472kB time=00:00:21.43 bitrate=3620.3kbits/s speed=3.25x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  701 fps= 99 q=15.0 size=   10240kB time=00:00:23.10 bitrate=3631.4kbits/s speed=3.25x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  751 fps= 99 q=16.0 size=   11008kB time=00:00:24.76 bitrate=3641.1kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  801 fps= 99 q=16.0 size=   12032kB time=00:00:26.43 bitrate=3728.9kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  851 fps= 99 q=16.0 size=   12544kB time=00:00:28.10 bitrate=3657.0kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  901 fps= 99 q=16.0 size=   13312kB time=00:00:29.76 bitrate=3663.6kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame=  950 fps= 99 q=16.0 size=   14080kB time=00:00:31.40 bitrate=3673.4kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1000 fps= 99 q=16.0 size=   14848kB time=00:00:33.06 bitrate=3678.5kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1050 fps= 99 q=16.0 size=   15616kB time=00:00:34.73 bitrate=3683.1kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1099 fps= 98 q=16.0 size=   16384kB time=00:00:36.36 bitrate=3690.7kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1150 fps= 99 q=16.0 size=   17152kB time=00:00:38.06 bitrate=3691.1kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1200 fps= 99 q=16.0 size=   17920kB time=00:00:39.73 bitrate=3694.7kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1250 fps= 99 q=16.0 size=   18688kB time=00:00:41.40 bitrate=3697.9kbits/s speed=3.26x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1300 fps= 99 q=16.0 size=   19456kB time=00:00:43.06 bitrate=3700.9kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1351 fps= 99 q=16.0 size=   20224kB time=00:00:44.76 bitrate=3700.9kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1399 fps= 99 q=16.0 size=   20992kB time=00:00:46.36 bitrate=3708.8kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1449 fps= 99 q=16.0 size=   21504kB time=00:00:48.03 bitrate=3667.5kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1499 fps= 99 q=16.0 size=   22272kB time=00:00:49.70 bitrate=3671.1kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1550 fps= 99 q=16.0 size=   23296kB time=00:00:51.40 bitrate=3712.9kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1599 fps= 99 q=16.0 size=   24064kB time=00:00:53.03 bitrate=3717.1kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1650 fps= 99 q=16.0 size=   24832kB time=00:00:54.73 bitrate=3716.6kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1701 fps= 99 q=16.0 size=   25600kB time=00:00:56.43 bitrate=3716.2kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1751 fps= 99 q=15.0 size=   26112kB time=00:00:58.10 bitrate=3681.7kbits/s speed=3.27x
Aug 05 20:24:27 raspberrypi python3[341358]: [mp4 @ 0x55561f621250] Starting second pass: moving the moov atom to the beginning of the file
Aug 05 20:24:27 raspberrypi python3[341358]: frame= 1767 fps= 98 q=-1.0 Lsize=   26845kB time=00:00:58.86 bitrate=3735.8kbits/s speed=3.28x
Aug 05 20:24:27 raspberrypi python3[341358]: video:26837kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.030294%
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] frame I:8     Avg QP:13.88  size:167035
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] frame P:1759  Avg QP:16.11  size: 14863
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] mb I  I16..4: 100.0%  0.0%  0.0%
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] mb P  I16..4:  7.1%  0.0%  0.0%  P16..4: 46.5%  0.0%  0.0%  0.0%  0.0%    skip:46.4%
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] coded y,uvDC,uvAC intra: 8.2% 69.1% 25.8% inter: 5.4% 42.0% 1.3%
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] i16 v,h,dc,p: 49% 20% 16% 14%
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] i8c dc,h,v,p: 39% 25% 28%  8%
Aug 05 20:24:27 raspberrypi python3[341358]: [libx264 @ 0x55561f621bc0] kb/s:3732.50
Aug 05 20:24:27 raspberrypi python3[341358]: 2025-08-05 20:24:27,225 - INFO - ✅ MP4 repair successful: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4
Aug 05 20:24:27 raspberrypi python3[341358]: 2025-08-05 20:24:27,394 - INFO - ✅ Video 1 repaired successfully
Aug 05 20:24:27 raspberrypi python3[341358]: 2025-08-05 20:24:27,395 - WARNING - ⚠️ Video 2 validation failed: Invalid MP4 header (missing ftyp)
Aug 05 20:24:27 raspberrypi python3[341358]: WARNING: ⚠️ Video 2 validation failed: Invalid MP4 header (missing ftyp)
Aug 05 20:24:27 raspberrypi python3[341358]: 2025-08-05 20:24:27,395 - INFO - 🔧 Attempting to repair MP4 file: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 20:24:45 raspberrypi python3[341358]: 2025-08-05 20:24:45,747 - INFO - 🧪 Repair FFmpeg stderr:
Aug 05 20:24:45 raspberrypi python3[341358]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 20:24:45 raspberrypi python3[341358]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 20:24:45 raspberrypi python3[341358]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 20:24:45 raspberrypi python3[341358]:   WARNING: library configuration mismatch
Aug 05 20:24:45 raspberrypi python3[341358]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 20:24:45 raspberrypi python3[341358]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 20:24:45 raspberrypi python3[341358]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 20:24:45 raspberrypi python3[341358]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 20:24:45 raspberrypi python3[341358]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 20:24:45 raspberrypi python3[341358]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 20:24:45 raspberrypi python3[341358]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 20:24:45 raspberrypi python3[341358]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 20:24:45 raspberrypi python3[341358]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 20:24:45 raspberrypi python3[341358]: Input #0, h264, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4':
Aug 05 20:24:45 raspberrypi python3[341358]:   Duration: N/A, bitrate: N/A
Aug 05 20:24:45 raspberrypi python3[341358]:   Stream #0:0: Video: h264 (Constrained Baseline), yuv420p(progressive), 1920x1080, 30 fps, 30 tbr, 1200k tbn
Aug 05 20:24:45 raspberrypi python3[341358]: Stream mapping:
Aug 05 20:24:45 raspberrypi python3[341358]:   Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))
Aug 05 20:24:45 raspberrypi python3[341358]: Press [q] to stop, [?] for help
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] using cpu capabilities: ARMv8 NEON
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] profile Constrained Baseline, level 4.0, 4:2:0, 8-bit
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] 264 - core 164 r3095 baee400 - H.264/MPEG-4 AVC codec - Copyleft 2003-2022 - http://www.videolan.org/x264.html - options: cabac=0 ref=1 deblock=0:0:0 analyse=0:0 me=dia subme=0 psy=1 psy_rd=1.00:0.00 mixed_ref=0 me_range=16 chroma_me=1 trellis=0 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=0 threads=6 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=250 keyint_min=25 scenecut=0 intra_refresh=0 rc=crf mbtree=0 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=0
Aug 05 20:24:45 raspberrypi python3[341358]: Output #0, mp4, to '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.repaired.mp4':
Aug 05 20:24:45 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:45 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:45 raspberrypi python3[341358]:   Stream #0:0: Video: h264 (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, q=2-31, 30 fps, 15360 tbn
Aug 05 20:24:45 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:45 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:45 raspberrypi python3[341358]:     Side data:
Aug 05 20:24:45 raspberrypi python3[341358]:       cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
Aug 05 20:24:45 raspberrypi python3[341358]: frame=    1 fps=0.0 q=0.0 size=       0kB time=00:00:00.00 bitrate=N/A speed=   0x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=   53 fps=0.0 q=16.0 size=     512kB time=00:00:01.50 bitrate=2796.3kbits/s speed=2.97x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  103 fps=102 q=16.0 size=    1280kB time=00:00:03.16 bitrate=3311.3kbits/s speed=3.14x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  154 fps=102 q=18.0 size=    2048kB time=00:00:04.86 bitrate=3447.4kbits/s speed=3.22x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  204 fps=101 q=16.0 size=    2816kB time=00:00:06.53 bitrate=3530.9kbits/s speed=3.24x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  254 fps=101 q=20.0 size=    3584kB time=00:00:08.20 bitrate=3580.5kbits/s speed=3.26x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  304 fps=100 q=18.0 size=    4352kB time=00:00:09.86 bitrate=3613.4kbits/s speed=3.26x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  355 fps=101 q=16.0 size=    5120kB time=00:00:11.56 bitrate=3626.2kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  406 fps=100 q=16.0 size=    5888kB time=00:00:13.26 bitrate=3635.8kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  457 fps=100 q=17.0 size=    6656kB time=00:00:14.96 bitrate=3643.2kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  507 fps=100 q=17.0 size=    7424kB time=00:00:16.63 bitrate=3656.4kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  558 fps=100 q=16.0 size=    8192kB time=00:00:18.33 bitrate=3660.5kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  608 fps=100 q=16.0 size=    8960kB time=00:00:20.00 bitrate=3670.0kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  658 fps=100 q=16.0 size=    9728kB time=00:00:21.66 bitrate=3678.1kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  706 fps=100 q=16.0 size=   10496kB time=00:00:23.26 bitrate=3695.6kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  755 fps= 99 q=19.0 size=   11264kB time=00:00:24.90 bitrate=3705.8kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  806 fps=100 q=16.0 size=   12288kB time=00:00:26.60 bitrate=3784.3kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  856 fps= 99 q=16.0 size=   13056kB time=00:00:28.26 bitrate=3783.8kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  907 fps=100 q=16.0 size=   13824kB time=00:00:29.96 bitrate=3779.1kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: frame=  956 fps= 99 q=16.0 size=   14592kB time=00:00:31.60 bitrate=3782.8kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1006 fps= 99 q=18.0 size=   15360kB time=00:00:33.26 bitrate=3782.4kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1057 fps= 99 q=16.0 size=   16128kB time=00:00:34.96 bitrate=3778.5kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1105 fps= 99 q=16.0 size=   16896kB time=00:00:36.56 bitrate=3785.2kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1155 fps= 99 q=16.0 size=   17664kB time=00:00:38.23 bitrate=3784.8kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1204 fps= 99 q=18.0 size=   18688kB time=00:00:39.86 bitrate=3840.1kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1254 fps= 99 q=20.0 size=   19456kB time=00:00:41.53 bitrate=3837.5kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1304 fps= 99 q=17.0 size=   20224kB time=00:00:43.20 bitrate=3835.1kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1353 fps= 99 q=19.0 size=   20992kB time=00:00:44.83 bitrate=3835.7kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1403 fps= 99 q=16.0 size=   21760kB time=00:00:46.50 bitrate=3833.5kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1453 fps= 99 q=16.0 size=   22528kB time=00:00:48.16 bitrate=3831.5kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1502 fps= 99 q=16.0 size=   23296kB time=00:00:49.80 bitrate=3832.1kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1552 fps= 99 q=16.0 size=   24320kB time=00:00:51.46 bitrate=3871.0kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1602 fps= 99 q=16.0 size=   25088kB time=00:00:53.13 bitrate=3868.0kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1651 fps= 99 q=16.0 size=   25856kB time=00:00:54.76 bitrate=3867.5kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1701 fps= 99 q=16.0 size=   26624kB time=00:00:56.43 bitrate=3864.8kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1751 fps= 99 q=16.0 size=   27392kB time=00:00:58.10 bitrate=3862.2kbits/s speed=3.28x
Aug 05 20:24:45 raspberrypi python3[341358]: [mp4 @ 0x5555cb6d3c60] Starting second pass: moving the moov atom to the beginning of the file
Aug 05 20:24:45 raspberrypi python3[341358]: frame= 1788 fps= 99 q=-1.0 Lsize=   28264kB time=00:00:59.56 bitrate=3887.0kbits/s speed=3.29x
Aug 05 20:24:45 raspberrypi python3[341358]: video:28255kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.028953%
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] frame I:8     Avg QP:14.75  size: 91437
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] frame P:1780  Avg QP:16.35  size: 15843
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] mb I  I16..4: 100.0%  0.0%  0.0%
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] mb P  I16..4: 11.1%  0.0%  0.0%  P16..4: 48.2%  0.0%  0.0%  0.0%  0.0%    skip:40.6%
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] coded y,uvDC,uvAC intra: 3.6% 67.8% 25.8% inter: 5.6% 45.8% 0.9%
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] i16 v,h,dc,p: 40% 26% 17% 17%
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] i8c dc,h,v,p: 39% 25% 28%  8%
Aug 05 20:24:45 raspberrypi python3[341358]: [libx264 @ 0x5555cb955980] kb/s:3883.61
Aug 05 20:24:45 raspberrypi python3[341358]: 2025-08-05 20:24:45,750 - INFO - ✅ MP4 repair successful: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 20:24:45 raspberrypi python3[341358]: 2025-08-05 20:24:45,915 - INFO - ✅ Video 2 repaired successfully
Aug 05 20:24:45 raspberrypi python3[341358]: 2025-08-05 20:24:45,915 - INFO - 🎬 Starting merge attempt 1/3
Aug 05 20:24:45 raspberrypi python3[341358]: 2025-08-05 20:24:45,915 - INFO - 📹 Input 1: 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4 (27,489,454 bytes)
Aug 05 20:24:45 raspberrypi python3[341358]: 2025-08-05 20:24:45,916 - INFO - 📹 Input 2: 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4 (28,941,872 bytes)
Aug 05 20:24:45 raspberrypi python3[341358]: 2025-08-05 20:24:45,916 - INFO - 🎯 Output: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:24:45 raspberrypi python3[341358]: 2025-08-05 20:24:45,916 - INFO - 🔧 Method: side_by_side
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,591 - INFO - 🎥 Generic camera - applying light distortion correction
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO - 🔧 Using lens correction: cx=0.5:cy=0.5:k1=0.05:k2=0.02
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO - 🎨 Using feathered blend merge:
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO -    - Source dimensions: 1920x1080, 1920x1080
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO -    - Feather width: 100px
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO -    - Edge trim: 5px
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO -    - Method: side_by_side
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO -    - Left visible: 1820px, Right visible: 1820px
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO -    - Distortion correction: enabled
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO - 🎬 Starting FFmpeg merge with 34 arguments
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO - 📹 Input files: 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4, 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO - 🎯 Output file: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,592 - INFO - 🔧 Method: side_by_side
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,804 - ERROR - ❌ FFmpeg failed on attempt 1
Aug 05 20:24:46 raspberrypi python3[341358]: ERROR: ❌ FFmpeg failed on attempt 1
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,804 - ERROR - 🔧 FFmpeg stderr:
Aug 05 20:24:46 raspberrypi python3[341358]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 20:24:46 raspberrypi python3[341358]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 20:24:46 raspberrypi python3[341358]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 20:24:46 raspberrypi python3[341358]:   WARNING: library configuration mismatch
Aug 05 20:24:46 raspberrypi python3[341358]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 20:24:46 raspberrypi python3[341358]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 20:24:46 raspberrypi python3[341358]: Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4':
Aug 05 20:24:46 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:46 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:46 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:46 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:46 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:46 raspberrypi python3[341358]:   Duration: 00:00:58.90, start: 0.000000, bitrate: 3733 kb/s
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #0:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3732 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:46 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:46 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:46 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:46 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:46 raspberrypi python3[341358]: Input #1, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4':
Aug 05 20:24:46 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:46 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:46 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:46 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:46 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:46 raspberrypi python3[341358]:   Duration: 00:00:59.60, start: 0.000000, bitrate: 3884 kb/s
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #1:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3883 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:46 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:46 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:46 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:46 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:46 raspberrypi python3[341358]: Stream mapping:
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:46 raspberrypi python3[341358]:   lenscorrection:default -> Stream #0:0 (libx264)
Aug 05 20:24:46 raspberrypi python3[341358]: Press [q] to stop, [?] for help
Aug 05 20:24:46 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x55558bd747d0] [Eval @ 0x7fffe690df40] Undefined constant or missing '(' in 'x/w)'
Aug 05 20:24:46 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x55558bd747d0] Failed to configure output pad on Parsed_blend_4
Aug 05 20:24:46 raspberrypi python3[341358]: Error reinitializing filters!
Aug 05 20:24:46 raspberrypi python3[341358]: Failed to inject frame into filter network: Invalid argument
Aug 05 20:24:46 raspberrypi python3[341358]: Error while processing the decoded data for stream #1:0
Aug 05 20:24:46 raspberrypi python3[341358]: Conversion failed!
Aug 05 20:24:46 raspberrypi python3[341358]: ERROR: 🔧 FFmpeg stderr:
Aug 05 20:24:46 raspberrypi python3[341358]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 20:24:46 raspberrypi python3[341358]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 20:24:46 raspberrypi python3[341358]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 20:24:46 raspberrypi python3[341358]:   WARNING: library configuration mismatch
Aug 05 20:24:46 raspberrypi python3[341358]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 20:24:46 raspberrypi python3[341358]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 20:24:46 raspberrypi python3[341358]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 20:24:46 raspberrypi python3[341358]: Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4':
Aug 05 20:24:46 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:46 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:46 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:46 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:46 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:46 raspberrypi python3[341358]:   Duration: 00:00:58.90, start: 0.000000, bitrate: 3733 kb/s
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #0:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3732 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:46 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:46 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:46 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:46 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:46 raspberrypi python3[341358]: Input #1, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4':
Aug 05 20:24:46 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:46 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:46 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:46 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:46 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:46 raspberrypi python3[341358]:   Duration: 00:00:59.60, start: 0.000000, bitrate: 3884 kb/s
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #1:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3883 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:46 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:46 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:46 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:46 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:46 raspberrypi python3[341358]: Stream mapping:
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:46 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:46 raspberrypi python3[341358]:   lenscorrection:default -> Stream #0:0 (libx264)
Aug 05 20:24:46 raspberrypi python3[341358]: Press [q] to stop, [?] for help
Aug 05 20:24:46 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x55558bd747d0] [Eval @ 0x7fffe690df40] Undefined constant or missing '(' in 'x/w)'
Aug 05 20:24:46 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x55558bd747d0] Failed to configure output pad on Parsed_blend_4
Aug 05 20:24:46 raspberrypi python3[341358]: Error reinitializing filters!
Aug 05 20:24:46 raspberrypi python3[341358]: Failed to inject frame into filter network: Invalid argument
Aug 05 20:24:46 raspberrypi python3[341358]: Error while processing the decoded data for stream #1:0
Aug 05 20:24:46 raspberrypi python3[341358]: Conversion failed!
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,804 - ERROR - 🔧 FFmpeg stdout:
Aug 05 20:24:46 raspberrypi python3[341358]: ERROR: 🔧 FFmpeg stdout:
Aug 05 20:24:46 raspberrypi python3[341358]: 2025-08-05 20:24:46,804 - INFO - ⏳ Waiting 1s before retry...
Aug 05 20:24:47 raspberrypi python3[341358]: 2025-08-05 20:24:47,804 - INFO - 🎬 Starting merge attempt 2/3
Aug 05 20:24:47 raspberrypi python3[341358]: 2025-08-05 20:24:47,804 - INFO - 📹 Input 1: 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4 (27,489,454 bytes)
Aug 05 20:24:47 raspberrypi python3[341358]: 2025-08-05 20:24:47,805 - INFO - 📹 Input 2: 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4 (28,941,872 bytes)
Aug 05 20:24:47 raspberrypi python3[341358]: 2025-08-05 20:24:47,805 - INFO - 🎯 Output: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:24:47 raspberrypi python3[341358]: 2025-08-05 20:24:47,805 - INFO - 🔧 Method: side_by_side
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,477 - INFO - 🎥 Generic camera - applying light distortion correction
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,477 - INFO - 🔧 Using lens correction: cx=0.5:cy=0.5:k1=0.05:k2=0.02
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,477 - INFO - 🎨 Using feathered blend merge:
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,477 - INFO -    - Source dimensions: 1920x1080, 1920x1080
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,477 - INFO -    - Feather width: 100px
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,477 - INFO -    - Edge trim: 5px
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,477 - INFO -    - Method: side_by_side
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,477 - INFO -    - Left visible: 1820px, Right visible: 1820px
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,477 - INFO -    - Distortion correction: enabled
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,478 - INFO - 🎬 Starting FFmpeg merge with 34 arguments
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,478 - INFO - 📹 Input files: 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4, 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,478 - INFO - 🎯 Output file: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,478 - INFO - 🔧 Method: side_by_side
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,688 - ERROR - ❌ FFmpeg failed on attempt 2
Aug 05 20:24:48 raspberrypi python3[341358]: ERROR: ❌ FFmpeg failed on attempt 2
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,688 - ERROR - 🔧 FFmpeg stderr:
Aug 05 20:24:48 raspberrypi python3[341358]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 20:24:48 raspberrypi python3[341358]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 20:24:48 raspberrypi python3[341358]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 20:24:48 raspberrypi python3[341358]:   WARNING: library configuration mismatch
Aug 05 20:24:48 raspberrypi python3[341358]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 20:24:48 raspberrypi python3[341358]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 20:24:48 raspberrypi python3[341358]: Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4':
Aug 05 20:24:48 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:48 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:48 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:48 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:48 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:48 raspberrypi python3[341358]:   Duration: 00:00:58.90, start: 0.000000, bitrate: 3733 kb/s
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #0:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3732 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:48 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:48 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:48 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:48 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:48 raspberrypi python3[341358]: Input #1, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4':
Aug 05 20:24:48 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:48 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:48 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:48 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:48 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:48 raspberrypi python3[341358]:   Duration: 00:00:59.60, start: 0.000000, bitrate: 3884 kb/s
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #1:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3883 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:48 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:48 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:48 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:48 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:48 raspberrypi python3[341358]: Stream mapping:
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:48 raspberrypi python3[341358]:   lenscorrection:default -> Stream #0:0 (libx264)
Aug 05 20:24:48 raspberrypi python3[341358]: Press [q] to stop, [?] for help
Aug 05 20:24:48 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x5556457a07d0] [Eval @ 0x7fffe2662a80] Undefined constant or missing '(' in 'x/w)'
Aug 05 20:24:48 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x5556457a07d0] Failed to configure output pad on Parsed_blend_4
Aug 05 20:24:48 raspberrypi python3[341358]: Error reinitializing filters!
Aug 05 20:24:48 raspberrypi python3[341358]: Failed to inject frame into filter network: Invalid argument
Aug 05 20:24:48 raspberrypi python3[341358]: Error while processing the decoded data for stream #1:0
Aug 05 20:24:48 raspberrypi python3[341358]: Conversion failed!
Aug 05 20:24:48 raspberrypi python3[341358]: ERROR: 🔧 FFmpeg stderr:
Aug 05 20:24:48 raspberrypi python3[341358]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 20:24:48 raspberrypi python3[341358]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 20:24:48 raspberrypi python3[341358]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 20:24:48 raspberrypi python3[341358]:   WARNING: library configuration mismatch
Aug 05 20:24:48 raspberrypi python3[341358]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 20:24:48 raspberrypi python3[341358]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 20:24:48 raspberrypi python3[341358]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 20:24:48 raspberrypi python3[341358]: Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4':
Aug 05 20:24:48 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:48 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:48 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:48 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:48 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:48 raspberrypi python3[341358]:   Duration: 00:00:58.90, start: 0.000000, bitrate: 3733 kb/s
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #0:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3732 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:48 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:48 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:48 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:48 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:48 raspberrypi python3[341358]: Input #1, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4':
Aug 05 20:24:48 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:48 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:48 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:48 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:48 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:48 raspberrypi python3[341358]:   Duration: 00:00:59.60, start: 0.000000, bitrate: 3884 kb/s
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #1:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3883 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:48 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:48 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:48 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:48 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:48 raspberrypi python3[341358]: Stream mapping:
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:48 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:48 raspberrypi python3[341358]:   lenscorrection:default -> Stream #0:0 (libx264)
Aug 05 20:24:48 raspberrypi python3[341358]: Press [q] to stop, [?] for help
Aug 05 20:24:48 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x5556457a07d0] [Eval @ 0x7fffe2662a80] Undefined constant or missing '(' in 'x/w)'
Aug 05 20:24:48 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x5556457a07d0] Failed to configure output pad on Parsed_blend_4
Aug 05 20:24:48 raspberrypi python3[341358]: Error reinitializing filters!
Aug 05 20:24:48 raspberrypi python3[341358]: Failed to inject frame into filter network: Invalid argument
Aug 05 20:24:48 raspberrypi python3[341358]: Error while processing the decoded data for stream #1:0
Aug 05 20:24:48 raspberrypi python3[341358]: Conversion failed!
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,689 - ERROR - 🔧 FFmpeg stdout:
Aug 05 20:24:48 raspberrypi python3[341358]: ERROR: 🔧 FFmpeg stdout:
Aug 05 20:24:48 raspberrypi python3[341358]: 2025-08-05 20:24:48,689 - INFO - ⏳ Waiting 2s before retry...
Aug 05 20:24:50 raspberrypi python3[341358]: 2025-08-05 20:24:50,689 - INFO - 🎬 Starting merge attempt 3/3
Aug 05 20:24:50 raspberrypi python3[341358]: 2025-08-05 20:24:50,689 - INFO - 📹 Input 1: 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4 (27,489,454 bytes)
Aug 05 20:24:50 raspberrypi python3[341358]: 2025-08-05 20:24:50,689 - INFO - 📹 Input 2: 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4 (28,941,872 bytes)
Aug 05 20:24:50 raspberrypi python3[341358]: 2025-08-05 20:24:50,689 - INFO - 🎯 Output: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:24:50 raspberrypi python3[341358]: 2025-08-05 20:24:50,689 - INFO - 🔧 Method: side_by_side
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO - 🎥 Generic camera - applying light distortion correction
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO - 🔧 Using lens correction: cx=0.5:cy=0.5:k1=0.05:k2=0.02
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO - 🎨 Using feathered blend merge:
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO -    - Source dimensions: 1920x1080, 1920x1080
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO -    - Feather width: 100px
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO -    - Edge trim: 5px
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO -    - Method: side_by_side
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO -    - Left visible: 1820px, Right visible: 1820px
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO -    - Distortion correction: enabled
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO - 🎬 Starting FFmpeg merge with 34 arguments
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO - 📹 Input files: 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4, 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO - 🎯 Output file: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,383 - INFO - 🔧 Method: side_by_side
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,598 - ERROR - ❌ FFmpeg failed on attempt 3
Aug 05 20:24:51 raspberrypi python3[341358]: ERROR: ❌ FFmpeg failed on attempt 3
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,598 - ERROR - 🔧 FFmpeg stderr:
Aug 05 20:24:51 raspberrypi python3[341358]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 20:24:51 raspberrypi python3[341358]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 20:24:51 raspberrypi python3[341358]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 20:24:51 raspberrypi python3[341358]:   WARNING: library configuration mismatch
Aug 05 20:24:51 raspberrypi python3[341358]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 20:24:51 raspberrypi python3[341358]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 20:24:51 raspberrypi python3[341358]: Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4':
Aug 05 20:24:51 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:51 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:51 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:51 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:51 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:51 raspberrypi python3[341358]:   Duration: 00:00:58.90, start: 0.000000, bitrate: 3733 kb/s
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #0:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3732 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:51 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:51 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:51 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:51 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:51 raspberrypi python3[341358]: Input #1, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4':
Aug 05 20:24:51 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:51 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:51 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:51 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:51 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:51 raspberrypi python3[341358]:   Duration: 00:00:59.60, start: 0.000000, bitrate: 3884 kb/s
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #1:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3883 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:51 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:51 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:51 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:51 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:51 raspberrypi python3[341358]: Stream mapping:
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:51 raspberrypi python3[341358]:   lenscorrection:default -> Stream #0:0 (libx264)
Aug 05 20:24:51 raspberrypi python3[341358]: Press [q] to stop, [?] for help
Aug 05 20:24:51 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x555649ffc7d0] [Eval @ 0x7fffc23ea5d0] Undefined constant or missing '(' in 'x/w)'
Aug 05 20:24:51 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x555649ffc7d0] Failed to configure output pad on Parsed_blend_4
Aug 05 20:24:51 raspberrypi python3[341358]: Error reinitializing filters!
Aug 05 20:24:51 raspberrypi python3[341358]: Failed to inject frame into filter network: Invalid argument
Aug 05 20:24:51 raspberrypi python3[341358]: Error while processing the decoded data for stream #1:0
Aug 05 20:24:51 raspberrypi python3[341358]: Conversion failed!
Aug 05 20:24:51 raspberrypi python3[341358]: ERROR: 🔧 FFmpeg stderr:
Aug 05 20:24:51 raspberrypi python3[341358]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 20:24:51 raspberrypi python3[341358]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 20:24:51 raspberrypi python3[341358]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 20:24:51 raspberrypi python3[341358]:   WARNING: library configuration mismatch
Aug 05 20:24:51 raspberrypi python3[341358]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 20:24:51 raspberrypi python3[341358]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 20:24:51 raspberrypi python3[341358]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 20:24:51 raspberrypi python3[341358]: Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4':
Aug 05 20:24:51 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:51 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:51 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:51 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:51 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:51 raspberrypi python3[341358]:   Duration: 00:00:58.90, start: 0.000000, bitrate: 3733 kb/s
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #0:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3732 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:51 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:51 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:51 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:51 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:51 raspberrypi python3[341358]: Input #1, mov,mp4,m4a,3gp,3g2,mj2, from '/opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4':
Aug 05 20:24:51 raspberrypi python3[341358]:   Metadata:
Aug 05 20:24:51 raspberrypi python3[341358]:     major_brand     : isom
Aug 05 20:24:51 raspberrypi python3[341358]:     minor_version   : 512
Aug 05 20:24:51 raspberrypi python3[341358]:     compatible_brands: isomiso2avc1mp41
Aug 05 20:24:51 raspberrypi python3[341358]:     encoder         : Lavf59.27.100
Aug 05 20:24:51 raspberrypi python3[341358]:   Duration: 00:00:59.60, start: 0.000000, bitrate: 3884 kb/s
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #1:0[0x1](und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, 3883 kb/s, 30 fps, 30 tbr, 15360 tbn (default)
Aug 05 20:24:51 raspberrypi python3[341358]:     Metadata:
Aug 05 20:24:51 raspberrypi python3[341358]:       handler_name    : VideoHandler
Aug 05 20:24:51 raspberrypi python3[341358]:       vendor_id       : [0][0][0][0]
Aug 05 20:24:51 raspberrypi python3[341358]:       encoder         : Lavc59.37.100 libx264
Aug 05 20:24:51 raspberrypi python3[341358]: Stream mapping:
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #0:0 (h264) -> crop:default
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:51 raspberrypi python3[341358]:   Stream #1:0 (h264) -> crop:default
Aug 05 20:24:51 raspberrypi python3[341358]:   lenscorrection:default -> Stream #0:0 (libx264)
Aug 05 20:24:51 raspberrypi python3[341358]: Press [q] to stop, [?] for help
Aug 05 20:24:51 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x555649ffc7d0] [Eval @ 0x7fffc23ea5d0] Undefined constant or missing '(' in 'x/w)'
Aug 05 20:24:51 raspberrypi python3[341358]: [Parsed_blend_4 @ 0x555649ffc7d0] Failed to configure output pad on Parsed_blend_4
Aug 05 20:24:51 raspberrypi python3[341358]: Error reinitializing filters!
Aug 05 20:24:51 raspberrypi python3[341358]: Failed to inject frame into filter network: Invalid argument
Aug 05 20:24:51 raspberrypi python3[341358]: Error while processing the decoded data for stream #1:0
Aug 05 20:24:51 raspberrypi python3[341358]: Conversion failed!
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,599 - ERROR - 🔧 FFmpeg stdout:
Aug 05 20:24:51 raspberrypi python3[341358]: ERROR: 🔧 FFmpeg stdout:
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,599 - WARNING - ⚠️ Trying fallback simple merge method...
Aug 05 20:24:51 raspberrypi python3[341358]: WARNING: ⚠️ Trying fallback simple merge method...
Aug 05 20:24:51 raspberrypi python3[341358]: 2025-08-05 20:24:51,599 - INFO - 🔄 Trying fallback merge method: side_by_side
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,316 - INFO - ✅ Fallback merge successful
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,317 - INFO - ✅ Enhanced merge successful: 51,563,470 bytes
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,317 - INFO - ✅ Successfully created merged video: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,317 - INFO - 📊 Merged file size: 51,563,470 bytes
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,318 - INFO - 📝 Metadata saved to: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.json
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,318 - INFO - 📤 Emitted upload_pending event for booking 19e78988-0bcd-45ac-be85-fdce10593c38
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,318 - INFO - 📤 Upload trigger emitted: /opt/ezrec-backend/events/upload_pending_19e78988-0bcd-45ac-be85-fdce10593c38.event
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,318 - INFO - ✅ Created .done marker: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.done
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,318 - INFO - 📤 Emitted recording_complete event for booking 19e78988-0bcd-45ac-be85-fdce10593c38
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,322 - INFO - ✅ Cleaned up individual camera files
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,798 - INFO - HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.19e78988-0bcd-45ac-be85-fdce10593c38 "HTTP/1.1 200 OK"
Aug 05 20:25:29 raspberrypi python3[341358]: 2025-08-05 20:25:29,801 - INFO - ✅ Updated booking 19e78988-0bcd-45ac-be85-fdce10593c38 status to RecordingFinished
Aug 05 20:25:30 raspberrypi python3[341358]: 2025-08-05 20:25:30,090 - INFO - HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/cameras?id=eq.d217e751-dfa5-5276-abbb-da5ad6c2626a "HTTP/1.1 200 OK"
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,092 - INFO - 📋 Loaded 1 bookings from cache
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,092 - INFO - 🔍 Checking 1 bookings at 2025-08-05 20:25:35 EDT
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,092 - INFO - 🔍 Looking for user_id: 65aa2e2a-e463-424d-b88f-0724bb0bea3a, camera_id: d217e751-dfa5-5276-abbb-da5ad6c2626a
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,092 - INFO - 🔍 Booking 0: 19e78988-0bcd-45ac-be85-fdce10593c38
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,092 - INFO -    User ID: 65aa2e2a-e463-424d-b88f-0724bb0bea3a (expected: 65aa2e2a-e463-424d-b88f-0724bb0bea3a)
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,093 - INFO -    Camera ID: d217e751-dfa5-5276-abbb-da5ad6c2626a (expected: d217e751-dfa5-5276-abbb-da5ad6c2626a)
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,093 - INFO -    Start: 2025-08-05 20:23:00 EDT
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,093 - INFO -    End: 2025-08-05 20:24:00 EDT
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,093 - INFO -    Now: 2025-08-05 20:25:35 EDT
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,093 - INFO -    User match: True, Camera match: True, Time match: False
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,093 - INFO - ❌ No active booking found
Aug 05 20:25:35 raspberrypi python3[341358]: 2025-08-05 20:25:35,093 - INFO - ⏳ No active booking found, waiting...
Aug 05 20:25:40 raspberrypi python3[341358]: 2025-08-05 20:25:40,093 - INFO - 📋 Loaded 1 bookings from cache
Aug 05 20:25:40 raspberrypi python3[341358]: 2025-08-05 20:25:40,094 - INFO - 🔍 Checking 1 bookings at 2025-08-05 20:25:40 EDT
Aug 05 20:25:40 raspberrypi python3[341358]: 2025-08-05 20:25:40,094 - INFO - 🔍 Looking for user_id: 65aa2e2a-e463-424d-b88f-0724bb0bea3a, camera_id: d217e751-dfa5-5276-abbb-da5ad6c2626a
Aug 05 20:25:40 raspberrypi python3[341358]: 2025-08-05 20:25:40,094 - INFO - 🔍 Booking 0: 19e78988-0bcd-45ac-be85-fdce10593c38
Aug 05 20:25:40 raspberrypi python3[341358]: 2025-08-05 20:25:40,094 - INFO -    User ID: 65aa2e2a-e463-424d-b88f-0724bb0bea3a (expected: 65aa2e2a-e463-424d-b88f-0724bb0bea3a)
Aug 05 20:25:40 raspberrypi python3[341358]: 2025-08-05 20:25:40,094 - INFO -    Camera ID: d217e751-dfa5-5276-abbb-da5ad6c2626a (expected: d217e751-dfa5-5276-abbb-da5ad6c2626a)
Aug 05 20:25:40 raspberrypi python3[341358]: 2025-08-05 20:25:40,094 - INFO -    Start: 2025-08-05 20:23:00 EDT
Aug 05 20:25:40 raspberrypi python3[341358]: 2025-08-05 20:25:40,094 - INFO -    End: 2025-08-05 20:24:00 EDT
Aug 05 20:25:40 raspberrypi python3[341358]: 2025-08-05 20:25:40,094 - INFO -    Now: 2025-08-05 20:25:40 EDT

video_worker logs
Aug 05 20:25:24 raspberrypi python3[340941]: 2025-08-05 20:25:24,820 [INFO] Checking 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 20:25:24 raspberrypi python3[340941]: 2025-08-05 20:25:24,820 [INFO] Checking 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 20:25:24 raspberrypi python3[340941]: 2025-08-05 20:25:24,820 [INFO] Checking 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 20:25:39 raspberrypi python3[340941]: 2025-08-05 20:25:39,869 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 20:25:39 raspberrypi python3[340941]: 2025-08-05 20:25:39,870 [INFO] Checking 202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=False, meta=True
Aug 05 20:25:40 raspberrypi python3[340941]: 2025-08-05 20:25:40,270 [INFO] HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.19e78988-0bcd-45ac-be85-fdce10593c38 "HTTP/1.1 200 OK"
Aug 05 20:25:40 raspberrypi python3[340941]: 2025-08-05 20:25:40,274 [INFO] ✅ Updated booking 19e78988-0bcd-45ac-be85-fdce10593c38 status to Processing
Aug 05 20:25:40 raspberrypi python3[340941]: 2025-08-05 20:25:40,275 [INFO] 🔍 Validating input video format: /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:25:40 raspberrypi python3[340941]: 2025-08-05 20:25:40,448 [INFO] 📹 Input video: h264 3840x1080 @ 30.0fps, yuv420p
Aug 05 20:25:40 raspberrypi python3[340941]: 2025-08-05 20:25:40,709 [INFO] HTTP Request: GET https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/user_settings?select=%2A&user_id=eq.65aa2e2a-e463-424d-b88f-0724bb0bea3a "HTTP/1.1 200 OK"
Aug 05 20:25:44 raspberrypi python3[340941]: 2025-08-05 20:25:44,281 [INFO] Re-encoding intro video to H.264 1280x720 30fps yuv420p for fast concat...
Aug 05 20:25:51 raspberrypi python3[340941]: 2025-08-05 20:25:51,199 [INFO] [Two-pass] Pass 1: Overlaying logos on main recording only...
Aug 05 20:25:51 raspberrypi python3[340941]: 2025-08-05 20:25:51,199 [INFO] Overlay filter chain: [1:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[staticlogo_scaled]; [0:v][staticlogo_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[staticlogo_out]; [2:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[userlogo_scaled]; [staticlogo_out][userlogo_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[userlogo_out]; [3:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor0_scaled]; [userlogo_out][sponsor0_scaled]overlay=10:main_h-overlay_h-10:format=auto[sponsor0_out]; [4:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor1_scaled]; [sponsor0_out][sponsor1_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[sponsor1_out]; [5:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor2_scaled]; [sponsor1_out][sponsor2_scaled]overlay=(main_w-overlay_w)/2:main_h-overlay_h-10:format=auto[sponsor2_out]; [sponsor2_out]setsar=1[finalout]
Aug 05 20:25:51 raspberrypi python3[340941]: 2025-08-05 20:25:51,199 [INFO] FFmpeg command: ffmpeg -y -i /opt/ezrec-backend/recordings/2025-08-05/202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4 -i /opt/ezrec-backend/assets/ezrec_logo.png -i /opt/ezrec-backend/media_cache/65aa2e2a-e463-424d-b88f-0724bb0bea3a/logo.png -i /opt/ezrec-backend/media_cache/65aa2e2a-e463-424d-b88f-0724bb0bea3a/sponsor_logo1.png -i /opt/ezrec-backend/media_cache/65aa2e2a-e463-424d-b88f-0724bb0bea3a/sponsor_logo2.png -i /opt/ezrec-backend/media_cache/65aa2e2a-e463-424d-b88f-0724bb0bea3a/sponsor_logo3.png -filter_complex [1:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[staticlogo_scaled]; [0:v][staticlogo_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[staticlogo_out]; [2:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[userlogo_scaled]; [staticlogo_out][userlogo_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[userlogo_out]; [3:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor0_scaled]; [userlogo_out][sponsor0_scaled]overlay=10:main_h-overlay_h-10:format=auto[sponsor0_out]; [4:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor1_scaled]; [sponsor0_out][sponsor1_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[sponsor1_out]; [5:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor2_scaled]; [sponsor1_out][sponsor2_scaled]overlay=(main_w-overlay_w)/2:main_h-overlay_h-10:format=auto[sponsor2_out]; [sponsor2_out]setsar=1[finalout] -map [finalout] -c:v libx264 -preset ultrafast -crf 28 -pix_fmt yuv420p /opt/ezrec-backend/recordings/2025-08-05/main_with_logos_202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:26:35 raspberrypi python3[340941]: 2025-08-05 20:26:35,739 [INFO] ✅ Logo overlay completed in 44.54s
Aug 05 20:26:35 raspberrypi python3[340941]: 2025-08-05 20:26:35,739 [INFO] [Two-pass] Pass 2: Concatenating intro and logo-overlaid main video to /opt/ezrec-backend/recordings/2025-08-05/concat_202300-202400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 20:27:11 raspberrypi python3[340941]: 2025-08-05 20:27:11,548 [INFO] ✅ Concat completed in 35.81s
Aug 05 20:27:11 raspberrypi python3[340941]: 2025-08-05 20:27:11,901 [INFO] HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.19e78988-0bcd-45ac-be85-fdce10593c38 "HTTP/1.1 200 OK"
Aug 05 20:27:11 raspberrypi python3[340941]: 2025-08-05 20:27:11,905 [INFO] ✅ Updated booking 19e78988-0bcd-45ac-be85-fdce10593c38 status to Uploading
Aug 05 20:27:39 raspberrypi python3[340941]: 2025-08-05 20:27:39,108 [INFO] HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.19e78988-0bcd-45ac-be85-fdce10593c38 "HTTP/1.1 200 OK"
Aug 05 20:27:39 raspberrypi python3[340941]: 2025-08-05 20:27:39,111 [INFO] ✅ Updated booking 19e78988-0bcd-45ac-be85-fdce10593c38 status to Uploaded
Aug 05 20:27:39 raspberrypi python3[340941]: 2025-08-05 20:27:39,481 [INFO] HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.19e78988-0bcd-45ac-be85-fdce10593c38 "HTTP/1.1 200 OK"
Aug 05 20:27:39 raspberrypi python3[340941]: 2025-08-05 20:27:39,482 [INFO] ✅ Updated booking 19e78988-0bcd-45ac-be85-fdce10593c38 status to Completed
Aug 05 20:27:39 raspberrypi python3[340941]: 2025-08-05 20:27:39,483 [INFO] 🗑️ Removed completed booking 19e78988-0bcd-45ac-be85-fdce10593c38 from cache (video_worker)
Aug 05 20:27:39 raspberrypi python3[340941]: 2025-08-05 20:27:39,483 [INFO] 📊 Disk usage: 7.7% used, 102.0 GB free
Aug 05 20:27:39 raspberrypi python3[340941]: 2025-08-05 20:27:39,483 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
