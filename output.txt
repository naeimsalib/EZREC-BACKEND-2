dual_recorder logs

Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,398 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,398 - INFO - ðŸŽ¬ Starting recording for booking: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,398 - INFO - âœ… Created/verified recordings directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,398 - INFO - ðŸŽ¬ Starting dual camera recording session: 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,398 - INFO - ðŸ” Detecting cameras by direct access...
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,399 - INFO - Initialization successful.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,399 - INFO - Camera now open.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,600 - INFO - Camera closed successfully.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,600 - INFO - ðŸ“· Camera 0: Serial unknown_0
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,601 - INFO - Initialization successful.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,602 - INFO - Camera now open.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,802 - INFO - Camera closed successfully.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,803 - INFO - ðŸ“· Camera 1: Serial unknown_1
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,803 - INFO - âœ… Using separate cameras: Camera 0 (index 0) and Camera 1 (index 1)
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,803 - INFO - ðŸŽ¥ Starting dual camera recordings...
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,804 - INFO - ðŸŽ¬ Starting both cameras simultaneously...
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,804 [INFO] ðŸ”§ Initializing left camera (index 0, attempt: 1/3)
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,804 [INFO] ðŸ”§ Initializing right camera (index 1, attempt: 1/3)
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,804 - INFO - ðŸ”§ Initializing left camera (index 0, attempt: 1/3)
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,804 - INFO - ðŸ”§ Initializing right camera (index 1, attempt: 1/3)
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,805 - INFO - Initialization successful.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,806 - INFO - Initialization successful.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,806 - INFO - Camera now open.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,806 - INFO - Camera now open.
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,809 - INFO - Camera configuration has been adjusted!
Aug 05 22:48:03 raspberrypi python3[349056]: [53:41:27.582771620] [350629]  INFO Camera camera.cpp:1205 configuring streams: (0) 1920x1080-YUV420/Rec709 (1) 2028x1080-RGGB_PISP_COMP1/RAW
Aug 05 22:48:03 raspberrypi python3[349056]: [53:41:27.582910305] [349109]  INFO RPI pisp.cpp:1483 Sensor: /base/axi/pcie@1000120000/rp1/i2c@88000/imx477@1a - Selected sensor format: 2028x1080-SRGGB12_1X12 - Selected CFE format: 2028x1080-PC1R
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,811 - INFO - Camera configuration has been adjusted!
Aug 05 22:48:03 raspberrypi python3[349056]: [53:41:27.583415010] [350629]  INFO Camera camera.cpp:1205 configuring streams: (0) 1920x1080-YUV420/Rec709 (1) 2028x1080-RGGB_PISP_COMP1/RAW
Aug 05 22:48:03 raspberrypi python3[349056]: [53:41:27.583534454] [349109]  INFO RPI pisp.cpp:1483 Sensor: /base/axi/pcie@1000120000/rp1/i2c@80000/imx477@1a - Selected sensor format: 2028x1080-SRGGB12_1X12 - Selected CFE format: 2028x1080-PC1R
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,812 - INFO - Configuration successful!
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,812 - INFO - Configuration successful!
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,846 - INFO - Camera started
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,847 [INFO] âœ… left camera initialized successfully
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,846 - INFO - Camera started
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,848 [INFO] âœ… right camera initialized successfully
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,847 - INFO - âœ… left camera initialized successfully
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,848 - INFO - âœ… right camera initialized successfully
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,848 [INFO] ðŸŽ¥ Starting left camera recording
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,848 [INFO] ðŸŽ¥ Starting right camera recording
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,848 - INFO - ðŸŽ¥ Starting left camera recording
Aug 05 22:48:03 raspberrypi python3[349056]: 2025-08-05 22:48:03,848 - INFO - ðŸŽ¥ Starting right camera recording
Aug 05 22:48:08 raspberrypi python3[349056]: 2025-08-05 22:48:08,804 - INFO - âœ… Camera 0 recording thread is healthy
Aug 05 22:48:08 raspberrypi python3[349056]: 2025-08-05 22:48:08,805 - INFO - âœ… Camera 1 recording thread is healthy
Aug 05 22:48:08 raspberrypi python3[349056]: 2025-08-05 22:48:08,805 - INFO - âœ… Dual camera recording started successfully with 2 active camera(s)
Aug 05 22:48:09 raspberrypi python3[349056]: 2025-08-05 22:48:09,215 - INFO - HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.6cef537e-2d89-4d07-be67-48c021ee7d85 "HTTP/1.1 200 OK"
Aug 05 22:48:09 raspberrypi python3[349056]: 2025-08-05 22:48:09,220 - INFO - âœ… Updated booking 6cef537e-2d89-4d07-be67-48c021ee7d85 status to Recording
Aug 05 22:48:09 raspberrypi python3[349056]: 2025-08-05 22:48:09,221 - INFO - ðŸ“¡ Updated booking status to Recording
Aug 05 22:48:09 raspberrypi python3[349056]: 2025-08-05 22:48:09,426 - INFO - HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/cameras?id=eq.d217e751-dfa5-5276-abbb-da5ad6c2626a "HTTP/1.1 200 OK"
Aug 05 22:48:09 raspberrypi python3[349056]: 2025-08-05 22:48:09,427 - INFO - ðŸ“¡ Updated camera status
Aug 05 22:48:13 raspberrypi python3[349056]: 2025-08-05 22:48:13,852 [INFO] ðŸ“¹ right recording: 6330649 bytes
Aug 05 22:48:13 raspberrypi python3[349056]: 2025-08-05 22:48:13,852 - INFO - ðŸ“¹ right recording: 6330649 bytes
Aug 05 22:48:13 raspberrypi python3[349056]: 2025-08-05 22:48:13,853 [INFO] ðŸ“¹ left recording: 6398065 bytes
Aug 05 22:48:13 raspberrypi python3[349056]: 2025-08-05 22:48:13,853 - INFO - ðŸ“¹ left recording: 6398065 bytes
Aug 05 22:48:14 raspberrypi python3[349056]: 2025-08-05 22:48:14,428 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:14 raspberrypi python3[349056]: 2025-08-05 22:48:14,428 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:14 raspberrypi python3[349056]: 2025-08-05 22:48:14,429 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:14.428385-04:00
Aug 05 22:48:19 raspberrypi python3[349056]: 2025-08-05 22:48:19,430 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:19 raspberrypi python3[349056]: 2025-08-05 22:48:19,430 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:19 raspberrypi python3[349056]: 2025-08-05 22:48:19,431 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:19.430498-04:00
Aug 05 22:48:23 raspberrypi python3[349056]: 2025-08-05 22:48:23,854 [INFO] ðŸ“¹ left recording: 13890503 bytes
Aug 05 22:48:23 raspberrypi python3[349056]: 2025-08-05 22:48:23,854 [INFO] ðŸ“¹ right recording: 13813573 bytes
Aug 05 22:48:23 raspberrypi python3[349056]: 2025-08-05 22:48:23,854 - INFO - ðŸ“¹ left recording: 13890503 bytes
Aug 05 22:48:23 raspberrypi python3[349056]: 2025-08-05 22:48:23,854 - INFO - ðŸ“¹ right recording: 13813573 bytes
Aug 05 22:48:24 raspberrypi python3[349056]: 2025-08-05 22:48:24,431 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:24 raspberrypi python3[349056]: 2025-08-05 22:48:24,432 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:24 raspberrypi python3[349056]: 2025-08-05 22:48:24,433 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:24.431742-04:00
Aug 05 22:48:29 raspberrypi python3[349056]: 2025-08-05 22:48:29,433 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:29 raspberrypi python3[349056]: 2025-08-05 22:48:29,434 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:29 raspberrypi python3[349056]: 2025-08-05 22:48:29,434 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:29.433842-04:00
Aug 05 22:48:33 raspberrypi python3[349056]: 2025-08-05 22:48:33,855 [INFO] ðŸ“¹ right recording: 21332057 bytes
Aug 05 22:48:33 raspberrypi python3[349056]: 2025-08-05 22:48:33,855 - INFO - ðŸ“¹ right recording: 21332057 bytes
Aug 05 22:48:33 raspberrypi python3[349056]: 2025-08-05 22:48:33,859 [INFO] ðŸ“¹ left recording: 21388499 bytes
Aug 05 22:48:33 raspberrypi python3[349056]: 2025-08-05 22:48:33,859 - INFO - ðŸ“¹ left recording: 21388499 bytes
Aug 05 22:48:34 raspberrypi python3[349056]: 2025-08-05 22:48:34,434 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:34 raspberrypi python3[349056]: 2025-08-05 22:48:34,435 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:34 raspberrypi python3[349056]: 2025-08-05 22:48:34,435 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:34.434726-04:00
Aug 05 22:48:39 raspberrypi python3[349056]: 2025-08-05 22:48:39,435 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:39 raspberrypi python3[349056]: 2025-08-05 22:48:39,436 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:39 raspberrypi python3[349056]: 2025-08-05 22:48:39,437 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:39.435928-04:00
Aug 05 22:48:43 raspberrypi python3[349056]: 2025-08-05 22:48:43,859 [INFO] ðŸ“¹ right recording: 28812516 bytes
Aug 05 22:48:43 raspberrypi python3[349056]: 2025-08-05 22:48:43,859 - INFO - ðŸ“¹ right recording: 28812516 bytes
Aug 05 22:48:43 raspberrypi python3[349056]: 2025-08-05 22:48:43,863 [INFO] ðŸ“¹ left recording: 28875924 bytes
Aug 05 22:48:43 raspberrypi python3[349056]: 2025-08-05 22:48:43,863 - INFO - ðŸ“¹ left recording: 28875924 bytes
Aug 05 22:48:44 raspberrypi python3[349056]: 2025-08-05 22:48:44,437 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:44 raspberrypi python3[349056]: 2025-08-05 22:48:44,438 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:44 raspberrypi python3[349056]: 2025-08-05 22:48:44,438 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:44.437591-04:00
Aug 05 22:48:49 raspberrypi python3[349056]: 2025-08-05 22:48:49,438 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:49 raspberrypi python3[349056]: 2025-08-05 22:48:49,440 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:49 raspberrypi python3[349056]: 2025-08-05 22:48:49,440 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:49.438715-04:00
Aug 05 22:48:53 raspberrypi python3[349056]: 2025-08-05 22:48:53,863 [INFO] ðŸ“¹ right recording: 36298378 bytes
Aug 05 22:48:53 raspberrypi python3[349056]: 2025-08-05 22:48:53,863 - INFO - ðŸ“¹ right recording: 36298378 bytes
Aug 05 22:48:53 raspberrypi python3[349056]: 2025-08-05 22:48:53,865 [INFO] ðŸ“¹ left recording: 36351451 bytes
Aug 05 22:48:53 raspberrypi python3[349056]: 2025-08-05 22:48:53,865 - INFO - ðŸ“¹ left recording: 36351451 bytes
Aug 05 22:48:54 raspberrypi python3[349056]: 2025-08-05 22:48:54,440 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:54 raspberrypi python3[349056]: 2025-08-05 22:48:54,441 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:54 raspberrypi python3[349056]: 2025-08-05 22:48:54,441 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:54.440872-04:00
Aug 05 22:48:59 raspberrypi python3[349056]: 2025-08-05 22:48:59,441 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:48:59 raspberrypi python3[349056]: 2025-08-05 22:48:59,442 - INFO - ðŸŽ¯ Active booking found: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:48:59 raspberrypi python3[349056]: 2025-08-05 22:48:59,442 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:48:59.441770-04:00
Aug 05 22:49:03 raspberrypi python3[349056]: 2025-08-05 22:49:03,864 [INFO] ðŸ“¹ right recording: 43774838 bytes
Aug 05 22:49:03 raspberrypi python3[349056]: 2025-08-05 22:49:03,864 - INFO - ðŸ“¹ right recording: 43774838 bytes
Aug 05 22:49:03 raspberrypi python3[349056]: 2025-08-05 22:49:03,866 [INFO] ðŸ“¹ left recording: 43812130 bytes
Aug 05 22:49:03 raspberrypi python3[349056]: 2025-08-05 22:49:03,866 - INFO - ðŸ“¹ left recording: 43812130 bytes
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,445 - INFO - ðŸ“‹ Loaded 2 bookings from cache
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,445 - INFO - ðŸ” Checking 2 bookings at 2025-08-05 22:49:04 EDT
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,445 - INFO - ðŸ” Looking for user_id: 65aa2e2a-e463-424d-b88f-0724bb0bea3a, camera_id: d217e751-dfa5-5276-abbb-da5ad6c2626a
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,446 - INFO - ðŸ” Booking 0: 0ec28b55-f710-427d-a4e2-0e2290c20714
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,447 - INFO -    User ID: 65aa2e2a-e463-424d-b88f-0724bb0bea3a (expected: 65aa2e2a-e463-424d-b88f-0724bb0bea3a)
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,447 - INFO -    Camera ID: d217e751-dfa5-5276-abbb-da5ad6c2626a (expected: d217e751-dfa5-5276-abbb-da5ad6c2626a)
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,447 - INFO -    Start: 2025-08-05 21:33:00 EDT
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,448 - INFO -    End: 2025-08-05 21:34:00 EDT
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,448 - INFO -    Now: 2025-08-05 22:49:04 EDT
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,448 - INFO -    User match: True, Camera match: True, Time match: False
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,448 - INFO - ðŸ” Booking 1: 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,448 - INFO -    User ID: 65aa2e2a-e463-424d-b88f-0724bb0bea3a (expected: 65aa2e2a-e463-424d-b88f-0724bb0bea3a)
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,449 - INFO -    Camera ID: d217e751-dfa5-5276-abbb-da5ad6c2626a (expected: d217e751-dfa5-5276-abbb-da5ad6c2626a)
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,449 - INFO -    Start: 2025-08-05 22:48:00 EDT
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,449 - INFO -    End: 2025-08-05 22:49:00 EDT
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,450 - INFO -    Now: 2025-08-05 22:49:04 EDT
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,450 - INFO -    User match: True, Camera match: True, Time match: False
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,450 - INFO - âŒ No active booking found
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,450 - INFO - â³ No active booking found, waiting...
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,451 - INFO - ðŸ“Š Session status - Active: True, End time: 2025-08-05 22:49:00.816000-04:00, Current time: 2025-08-05 22:49:04.445087-04:00
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,451 - INFO - ðŸ›‘ Booking ended at 2025-08-05 22:49:00.816000-04:00, stopping recording (current time: 2025-08-05 22:49:04.445087-04:00)
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,451 - INFO - ðŸ›‘ Stopping dual camera recording
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,451 - INFO - ðŸ›‘ Stopping camera 0 recording...
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,454 - INFO - Camera stopped
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,660 - INFO - Camera closed successfully.
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,660 [INFO] âœ… left camera hardware released
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,660 - INFO - âœ… left camera hardware released
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,869 [INFO] âœ… left recording completed: 44268171 bytes
Aug 05 22:49:04 raspberrypi python3[349056]: 2025-08-05 22:49:04,869 - INFO - âœ… left recording completed: 44268171 bytes
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,085 [INFO] âœ… left MP4 file is valid
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,085 - INFO - âœ… left MP4 file is valid
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,085 [INFO] âœ… left MP4 file validated successfully
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,085 - INFO - âœ… left MP4 file validated successfully
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,085 [INFO] âœ… left camera thread stopped gracefully
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,085 - INFO - âœ… left camera thread stopped gracefully
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,086 [INFO] âœ… left recording completed: 44268171 bytes
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,086 - INFO - âœ… left recording completed: 44268171 bytes
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,317 [INFO] âœ… left MP4 file is valid
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,317 - INFO - âœ… left MP4 file is valid
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,317 [INFO] âœ… left MP4 file validated successfully
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,317 - INFO - âœ… left MP4 file validated successfully
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,318 - INFO - ðŸ›‘ Stopping camera 1 recording...
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,321 - INFO - Camera stopped
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,722 - INFO - Camera closed successfully.
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,722 [INFO] âœ… right camera hardware released
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,722 - INFO - âœ… right camera hardware released
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,865 [INFO] âœ… right recording completed: 44840778 bytes
Aug 05 22:49:05 raspberrypi python3[349056]: 2025-08-05 22:49:05,865 - INFO - âœ… right recording completed: 44840778 bytes
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,059 [INFO] âœ… right MP4 file is valid
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,059 - INFO - âœ… right MP4 file is valid
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,059 [INFO] âœ… right MP4 file validated successfully
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,059 - INFO - âœ… right MP4 file validated successfully
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,060 [INFO] âœ… right camera thread stopped gracefully
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,060 - INFO - âœ… right camera thread stopped gracefully
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,060 [INFO] âœ… right recording completed: 44840778 bytes
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,060 - INFO - âœ… right recording completed: 44840778 bytes
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,259 [INFO] âœ… right MP4 file is valid
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,259 - INFO - âœ… right MP4 file is valid
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,259 [INFO] âœ… right MP4 file validated successfully
Aug 05 22:49:06 raspberrypi python3[349056]: 2025-08-05 22:49:06,259 - INFO - âœ… right MP4 file validated successfully
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,277 - INFO - âœ… Forced cleanup of any remaining camera processes
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,277 - INFO - ðŸ” Checking camera recording files...
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,278 - INFO - ðŸ“Š Recording mode: Dual camera
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,278 - INFO - âœ… left recording: 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4 (44268171 bytes)
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,278 - INFO - âœ… right recording: 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4 (44840778 bytes)
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,278 - INFO - âœ… Both camera recordings completed
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,278 - INFO - ðŸŽ¬ Using enhanced merge for 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4 and 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,278 - INFO - ðŸ”§ Merge method: side_by_side
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,278 - INFO - ðŸ”§ Distortion correction: enabled
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,448 - WARNING - âš ï¸ Video 1 validation failed: Invalid MP4 header (missing ftyp)
Aug 05 22:49:09 raspberrypi python3[349056]: WARNING: âš ï¸ Video 1 validation failed: Invalid MP4 header (missing ftyp)
Aug 05 22:49:09 raspberrypi python3[349056]: 2025-08-05 22:49:09,448 - INFO - ðŸ”§ Attempting to repair MP4 file: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4
Aug 05 22:49:24 raspberrypi python3[349056]: 2025-08-05 22:49:24,423 - INFO - ðŸ§ª Repair FFmpeg stderr:
Aug 05 22:49:24 raspberrypi python3[349056]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 22:49:24 raspberrypi python3[349056]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 22:49:24 raspberrypi python3[349056]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 22:49:24 raspberrypi python3[349056]:   WARNING: library configuration mismatch
Aug 05 22:49:24 raspberrypi python3[349056]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 22:49:24 raspberrypi python3[349056]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 22:49:24 raspberrypi python3[349056]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 22:49:24 raspberrypi python3[349056]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 22:49:24 raspberrypi python3[349056]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 22:49:24 raspberrypi python3[349056]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 22:49:24 raspberrypi python3[349056]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 22:49:24 raspberrypi python3[349056]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 22:49:24 raspberrypi python3[349056]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 22:49:24 raspberrypi python3[349056]: Input #0, h264, from '/opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4':
Aug 05 22:49:24 raspberrypi python3[349056]:   Duration: N/A, bitrate: N/A
Aug 05 22:49:24 raspberrypi python3[349056]:   Stream #0:0: Video: h264 (Constrained Baseline), yuv420p(progressive), 1920x1080, 30 fps, 30 tbr, 1200k tbn
Aug 05 22:49:24 raspberrypi python3[349056]: Stream mapping:
Aug 05 22:49:24 raspberrypi python3[349056]:   Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))
Aug 05 22:49:24 raspberrypi python3[349056]: Press [q] to stop, [?] for help
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] using cpu capabilities: ARMv8 NEON
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] profile Constrained Baseline, level 4.0, 4:2:0, 8-bit
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] 264 - core 164 r3095 baee400 - H.264/MPEG-4 AVC codec - Copyleft 2003-2022 - http://www.videolan.org/x264.html - options: cabac=0 ref=1 deblock=0:0:0 analyse=0:0 me=dia subme=0 psy=1 psy_rd=1.00:0.00 mixed_ref=0 me_range=16 chroma_me=1 trellis=0 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=0 threads=6 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=250 keyint_min=25 scenecut=0 intra_refresh=0 rc=crf mbtree=0 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=0
Aug 05 22:49:24 raspberrypi python3[349056]: Output #0, mp4, to '/opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.repaired.mp4':
Aug 05 22:49:24 raspberrypi python3[349056]:   Metadata:
Aug 05 22:49:24 raspberrypi python3[349056]:     encoder         : Lavf59.27.100
Aug 05 22:49:24 raspberrypi python3[349056]:   Stream #0:0: Video: h264 (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, q=2-31, 30 fps, 15360 tbn
Aug 05 22:49:24 raspberrypi python3[349056]:     Metadata:
Aug 05 22:49:24 raspberrypi python3[349056]:       encoder         : Lavc59.37.100 libx264
Aug 05 22:49:24 raspberrypi python3[349056]:     Side data:
Aug 05 22:49:24 raspberrypi python3[349056]:       cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
Aug 05 22:49:24 raspberrypi python3[349056]: frame=    1 fps=0.0 q=0.0 size=       0kB time=00:00:00.00 bitrate=N/A speed=   0x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=   63 fps=0.0 q=13.0 size=     768kB time=00:00:01.83 bitrate=3431.8kbits/s speed=3.61x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  125 fps=123 q=13.0 size=    1536kB time=00:00:03.90 bitrate=3226.4kbits/s speed=3.84x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  188 fps=124 q=13.0 size=    2048kB time=00:00:06.00 bitrate=2796.2kbits/s speed=3.95x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  250 fps=124 q=13.0 size=    2560kB time=00:00:08.06 bitrate=2599.8kbits/s speed=3.99x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  310 fps=123 q=13.0 size=    3072kB time=00:00:10.06 bitrate=2499.9kbits/s speed=3.99x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  371 fps=122 q=13.0 size=    3840kB time=00:00:12.10 bitrate=2599.8kbits/s speed=3.99x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  432 fps=122 q=13.0 size=    4352kB time=00:00:14.13 bitrate=2522.5kbits/s speed=3.99x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  492 fps=122 q=13.0 size=    4864kB time=00:00:16.13 bitrate=2469.8kbits/s speed=3.99x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  552 fps=121 q=13.0 size=    5376kB time=00:00:18.13 bitrate=2428.7kbits/s speed=3.99x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  611 fps=121 q=13.0 size=    5888kB time=00:00:20.10 bitrate=2399.7kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  672 fps=121 q=13.0 size=    6656kB time=00:00:22.13 bitrate=2463.5kbits/s speed=3.99x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  731 fps=121 q=13.0 size=    7168kB time=00:00:24.10 bitrate=2436.5kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  792 fps=121 q=13.0 size=    7680kB time=00:00:26.13 bitrate=2407.5kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  851 fps=120 q=13.0 size=    8192kB time=00:00:28.10 bitrate=2388.2kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  911 fps=120 q=13.0 size=    8704kB time=00:00:30.10 bitrate=2368.9kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame=  971 fps=120 q=13.0 size=    9472kB time=00:00:32.10 bitrate=2417.3kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1032 fps=120 q=13.0 size=    9984kB time=00:00:34.13 bitrate=2396.2kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1094 fps=120 q=13.0 size=   10496kB time=00:00:36.20 bitrate=2375.2kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1154 fps=120 q=13.0 size=   11008kB time=00:00:38.20 bitrate=2360.7kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1215 fps=120 q=13.0 size=   11776kB time=00:00:40.23 bitrate=2397.7kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1275 fps=120 q=13.0 size=   12288kB time=00:00:42.23 bitrate=2383.5kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1336 fps=120 q=13.0 size=   12800kB time=00:00:44.26 bitrate=2368.8kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1396 fps=120 q=13.0 size=   13312kB time=00:00:46.26 bitrate=2357.0kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1457 fps=120 q=13.0 size=   14080kB time=00:00:48.30 bitrate=2388.1kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1518 fps=120 q=13.0 size=   14592kB time=00:00:50.33 bitrate=2374.9kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1578 fps=120 q=13.0 size=   15104kB time=00:00:52.33 bitrate=2364.3kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1639 fps=120 q=13.0 size=   15616kB time=00:00:54.36 bitrate=2353.0kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1699 fps=120 q=13.0 size=   16128kB time=00:00:56.36 bitrate=2344.0kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1758 fps=120 q=13.0 size=   16896kB time=00:00:58.33 bitrate=2372.8kbits/s speed=3.98x
Aug 05 22:49:24 raspberrypi python3[349056]: [mp4 @ 0x5555c456a080] Starting second pass: moving the moov atom to the beginning of the file
Aug 05 22:49:24 raspberrypi python3[349056]: frame= 1767 fps=120 q=-1.0 Lsize=   17094kB time=00:00:58.86 bitrate=2378.8kbits/s speed=3.99x
Aug 05 22:49:24 raspberrypi python3[349056]: video:17086kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.046667%
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] frame I:8     Avg QP:11.25  size: 23098
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] frame P:1759  Avg QP:13.01  size:  9841
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] mb I  I16..4: 100.0%  0.0%  0.0%
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] mb P  I16..4: 28.5%  0.0%  0.0%  P16..4:  0.8%  0.0%  0.0%  0.0%  0.0%    skip:70.7%
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] coded y,uvDC,uvAC intra: 1.5% 80.4% 68.4% inter: 0.1% 0.7% 0.0%
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] i16 v,h,dc,p: 99%  0%  1%  0%
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] i8c dc,h,v,p: 63% 16% 17%  5%
Aug 05 22:49:24 raspberrypi python3[349056]: [libx264 @ 0x5555c4109f90] kb/s:2376.31
Aug 05 22:49:24 raspberrypi python3[349056]: 2025-08-05 22:49:24,426 - INFO - âœ… MP4 repair successful: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4
Aug 05 22:49:24 raspberrypi python3[349056]: 2025-08-05 22:49:24,589 - INFO - âœ… Video 1 repaired successfully
Aug 05 22:49:24 raspberrypi python3[349056]: 2025-08-05 22:49:24,589 - WARNING - âš ï¸ Video 2 validation failed: Invalid MP4 header (missing ftyp)
Aug 05 22:49:24 raspberrypi python3[349056]: WARNING: âš ï¸ Video 2 validation failed: Invalid MP4 header (missing ftyp)
Aug 05 22:49:24 raspberrypi python3[349056]: 2025-08-05 22:49:24,590 - INFO - ðŸ”§ Attempting to repair MP4 file: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 22:49:39 raspberrypi python3[349056]: 2025-08-05 22:49:39,953 - INFO - ðŸ§ª Repair FFmpeg stderr:
Aug 05 22:49:39 raspberrypi python3[349056]: ffmpeg version 5.1.6-0+deb12u1+rpt3 Copyright (c) 2000-2024 the FFmpeg developers
Aug 05 22:49:39 raspberrypi python3[349056]:   built with gcc 12 (Debian 12.2.0-14)
Aug 05 22:49:39 raspberrypi python3[349056]:   configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared
Aug 05 22:49:39 raspberrypi python3[349056]:   WARNING: library configuration mismatch
Aug 05 22:49:39 raspberrypi python3[349056]:   avcodec     configuration: --prefix=/usr --extra-version=0+deb12u1+rpt3 --toolchain=hardened --incdir=/usr/include/aarch64-linux-gnu --enable-gpl --disable-stripping --disable-mmal --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librist --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opencl --enable-opengl --enable-sand --enable-sdl2 --disable-sndio --enable-libjxl --enable-neon --enable-v4l2-request --enable-libudev --enable-epoxy --libdir=/usr/lib/aarch64-linux-gnu --arch=arm64 --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-vout-drm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-libplacebo --enable-librav1e --enable-shared --enable-version3 --disable-doc --disable-programs --enable-libaribb24 --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libtesseract --enable-libvo_amrwbenc --enable-libsmbclient
Aug 05 22:49:39 raspberrypi python3[349056]:   libavutil      57. 28.100 / 57. 28.100
Aug 05 22:49:39 raspberrypi python3[349056]:   libavcodec     59. 37.100 / 59. 37.100
Aug 05 22:49:39 raspberrypi python3[349056]:   libavformat    59. 27.100 / 59. 27.100
Aug 05 22:49:39 raspberrypi python3[349056]:   libavdevice    59.  7.100 / 59.  7.100
Aug 05 22:49:39 raspberrypi python3[349056]:   libavfilter     8. 44.100 /  8. 44.100
Aug 05 22:49:39 raspberrypi python3[349056]:   libswscale      6.  7.100 /  6.  7.100
Aug 05 22:49:39 raspberrypi python3[349056]:   libswresample   4.  7.100 /  4.  7.100
Aug 05 22:49:39 raspberrypi python3[349056]:   libpostproc    56.  6.100 / 56.  6.100
Aug 05 22:49:39 raspberrypi python3[349056]: Input #0, h264, from '/opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4':
Aug 05 22:49:39 raspberrypi python3[349056]:   Duration: N/A, bitrate: N/A
Aug 05 22:49:39 raspberrypi python3[349056]:   Stream #0:0: Video: h264 (Constrained Baseline), yuv420p(progressive), 1920x1080, 30 fps, 30 tbr, 1200k tbn
Aug 05 22:49:39 raspberrypi python3[349056]: Stream mapping:
Aug 05 22:49:39 raspberrypi python3[349056]:   Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))
Aug 05 22:49:39 raspberrypi python3[349056]: Press [q] to stop, [?] for help
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] using cpu capabilities: ARMv8 NEON
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] profile Constrained Baseline, level 4.0, 4:2:0, 8-bit
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] 264 - core 164 r3095 baee400 - H.264/MPEG-4 AVC codec - Copyleft 2003-2022 - http://www.videolan.org/x264.html - options: cabac=0 ref=1 deblock=0:0:0 analyse=0:0 me=dia subme=0 psy=1 psy_rd=1.00:0.00 mixed_ref=0 me_range=16 chroma_me=1 trellis=0 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=0 threads=6 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=250 keyint_min=25 scenecut=0 intra_refresh=0 rc=crf mbtree=0 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=0
Aug 05 22:49:39 raspberrypi python3[349056]: Output #0, mp4, to '/opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.repaired.mp4':
Aug 05 22:49:39 raspberrypi python3[349056]:   Metadata:
Aug 05 22:49:39 raspberrypi python3[349056]:     encoder         : Lavf59.27.100
Aug 05 22:49:39 raspberrypi python3[349056]:   Stream #0:0: Video: h264 (avc1 / 0x31637661), yuv420p(progressive), 1920x1080, q=2-31, 30 fps, 15360 tbn
Aug 05 22:49:39 raspberrypi python3[349056]:     Metadata:
Aug 05 22:49:39 raspberrypi python3[349056]:       encoder         : Lavc59.37.100 libx264
Aug 05 22:49:39 raspberrypi python3[349056]:     Side data:
Aug 05 22:49:39 raspberrypi python3[349056]:       cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
Aug 05 22:49:39 raspberrypi python3[349056]: frame=    1 fps=0.0 q=0.0 size=       0kB time=00:00:00.00 bitrate=N/A speed=   0x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=   59 fps=0.0 q=13.0 size=     768kB time=00:00:01.70 bitrate=3700.9kbits/s speed= 3.3x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  119 fps=116 q=13.0 size=    1536kB time=00:00:03.70 bitrate=3400.8kbits/s speed=3.61x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  178 fps=117 q=13.0 size=    2048kB time=00:00:05.66 bitrate=2960.7kbits/s speed=3.71x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  238 fps=117 q=13.0 size=    2560kB time=00:00:07.66 bitrate=2735.4kbits/s speed=3.78x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  298 fps=118 q=13.0 size=    3072kB time=00:00:09.66 bitrate=2603.4kbits/s speed=3.82x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  360 fps=118 q=13.0 size=    3328kB time=00:00:11.73 bitrate=2323.6kbits/s speed=3.86x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  419 fps=118 q=13.0 size=    3840kB time=00:00:13.70 bitrate=2296.2kbits/s speed=3.86x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  480 fps=118 q=13.0 size=    4352kB time=00:00:15.73 bitrate=2266.0kbits/s speed=3.88x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  540 fps=119 q=13.0 size=    4864kB time=00:00:17.73 bitrate=2247.0kbits/s speed=3.89x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  600 fps=119 q=13.0 size=    5376kB time=00:00:19.73 bitrate=2231.8kbits/s speed= 3.9x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  659 fps=118 q=13.0 size=    5888kB time=00:00:21.70 bitrate=2222.8kbits/s speed= 3.9x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  719 fps=118 q=13.0 size=    6400kB time=00:00:23.70 bitrate=2212.2kbits/s speed= 3.9x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  778 fps=118 q=13.0 size=    6912kB time=00:00:25.66 bitrate=2206.1kbits/s speed= 3.9x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  838 fps=118 q=13.0 size=    7424kB time=00:00:27.66 bitrate=2198.2kbits/s speed=3.91x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  897 fps=118 q=13.0 size=    7936kB time=00:00:29.63 bitrate=2193.9kbits/s speed=3.91x
Aug 05 22:49:39 raspberrypi python3[349056]: frame=  957 fps=118 q=13.0 size=    8448kB time=00:00:31.63 bitrate=2187.8kbits/s speed=3.91x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1017 fps=118 q=13.0 size=    8704kB time=00:00:33.63 bitrate=2120.0kbits/s speed=3.92x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1076 fps=118 q=13.0 size=    9216kB time=00:00:35.60 bitrate=2120.7kbits/s speed=3.92x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1137 fps=119 q=13.0 size=    9728kB time=00:00:37.63 bitrate=2117.6kbits/s speed=3.92x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1196 fps=118 q=13.0 size=   10240kB time=00:00:39.60 bitrate=2118.3kbits/s speed=3.92x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1256 fps=118 q=14.0 size=   10752kB time=00:00:41.60 bitrate=2117.3kbits/s speed=3.92x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1316 fps=118 q=13.0 size=   11264kB time=00:00:43.60 bitrate=2116.4kbits/s speed=3.92x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1376 fps=118 q=13.0 size=   11776kB time=00:00:45.60 bitrate=2115.6kbits/s speed=3.92x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1437 fps=119 q=13.0 size=   12288kB time=00:00:47.63 bitrate=2113.3kbits/s speed=3.93x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1497 fps=119 q=13.0 size=   12800kB time=00:00:49.63 bitrate=2112.6kbits/s speed=3.93x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1556 fps=118 q=13.0 size=   13312kB time=00:00:51.60 bitrate=2113.4kbits/s speed=3.93x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1616 fps=118 q=13.0 size=   13824kB time=00:00:53.60 bitrate=2112.8kbits/s speed=3.93x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1675 fps=118 q=13.0 size=   14336kB time=00:00:55.56 bitrate=2113.5kbits/s speed=3.93x
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1734 fps=118 q=13.0 size=   14848kB time=00:00:57.53 bitrate=2114.2kbits/s speed=3.93x
Aug 05 22:49:39 raspberrypi python3[349056]: [mp4 @ 0x5555b6cb56a0] Starting second pass: moving the moov atom to the beginning of the file
Aug 05 22:49:39 raspberrypi python3[349056]: frame= 1790 fps=118 q=-1.0 Lsize=   15609kB time=00:00:59.63 bitrate=2144.3kbits/s speed=3.94x
Aug 05 22:49:39 raspberrypi python3[349056]: video:15601kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.051736%
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] frame I:8     Avg QP:12.13  size: 22784
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] frame P:1782  Avg QP:13.14  size:  8862
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] mb I  I16..4: 100.0%  0.0%  0.0%
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] mb P  I16..4: 25.5%  0.0%  0.0%  P16..4:  0.9%  0.0%  0.0%  0.0%  0.0%    skip:73.6%
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] coded y,uvDC,uvAC intra: 3.5% 77.8% 62.0% inter: 0.1% 0.8% 0.0%
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] i16 v,h,dc,p: 98%  1%  1%  0%
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] i8c dc,h,v,p: 63% 16% 17%  4%
Aug 05 22:49:39 raspberrypi python3[349056]: [libx264 @ 0x5555b6851980] kb/s:2141.87
Aug 05 22:49:39 raspberrypi python3[349056]: 2025-08-05 22:49:39,956 - INFO - âœ… MP4 repair successful: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,119 - INFO - âœ… Video 2 repaired successfully
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,120 - INFO - ðŸŽ¬ Starting merge attempt 1/3
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,120 - INFO - ðŸ“¹ Input 1: 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4 (17,504,349 bytes)
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,120 - INFO - ðŸ“¹ Input 2: 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4 (15,983,657 bytes)
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,120 - INFO - ðŸŽ¯ Output: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,120 - INFO - ðŸ”§ Method: side_by_side
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO - ðŸŽ¥ Generic camera - applying light distortion correction
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO - ðŸ”§ Using lens correction: cx=0.5:cy=0.5:k1=0.05:k2=0.02
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO - ðŸŽ¨ Using feathered blend merge:
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO -    - Source dimensions: 1920x1080, 1920x1080
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO -    - Feather width: 100px
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO -    - Edge trim: 5px
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO -    - Method: side_by_side
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO -    - Left visible: 1820px, Right visible: 1820px
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO -    - Distortion correction: enabled
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO - ðŸŽ¬ Starting FFmpeg merge with 34 arguments
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO - ðŸ“¹ Input files: 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4, 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,777 - INFO - ðŸŽ¯ Output file: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 22:49:40 raspberrypi python3[349056]: 2025-08-05 22:49:40,778 - INFO - ðŸ”§ Method: side_by_side
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,645 - INFO - âœ… Output file validation passed
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,813 - INFO - âœ… Merge completed successfully!
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - ðŸ“Š Output size: 21,729,439 bytes
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - â±ï¸ Merge time: 77.20 seconds
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - ðŸŽ¬ Duration: 59.67 seconds
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - âœ… Enhanced merge successful: 21,729,439 bytes
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - ðŸŽ¬ Video duration: 59.67 seconds
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - âœ… Successfully created merged video: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - ðŸ“Š Merged file size: 21,729,439 bytes
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - ðŸ“ Metadata saved to: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.json
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - ðŸ“¤ Emitted upload_pending event for booking 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,814 - INFO - ðŸ“¤ Upload trigger emitted: /opt/ezrec-backend/events/upload_pending_6cef537e-2d89-4d07-be67-48c021ee7d85.event
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,815 - INFO - âœ… Created .done marker: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.done
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,815 - INFO - ðŸ“¤ Emitted recording_complete event for booking 6cef537e-2d89-4d07-be67-48c021ee7d85
Aug 05 22:50:26 raspberrypi python3[349056]: 2025-08-05 22:50:26,817 - INFO - âœ… Cleaned up individual camera files
Aug 05 22:50:27 raspberrypi python3[349056]: 2025-08-05 22:50:27,080 - INFO - HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.6cef537e-2d89-4d07-be67-48c021ee7d85 "HTTP/1.1 200 OK"
Aug 05 22:50:27 raspberrypi python3[349056]: 2025-08-05 22:50:27,083 - INFO - âœ… Updated booking 6cef537e-2d89-4d07-be67-48c021ee7d85 status to RecordingFinished
Aug 05 22:50:27 raspberrypi python3[349056]: 2025-08-05 22:50:27,402 - INFO - HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/cameras?id=eq.d217e751-dfa5-5276-abbb-da5ad6c2626a "HTTP/1.1 200 OK"


video_worker logs

Aug 05 22:49:29 raspberrypi python3[350603]: 2025-08-05 22:49:29,596 [INFO] Checking 213300-213400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=True, error=False, meta=True
Aug 05 22:49:29 raspberrypi python3[350603]: 2025-08-05 22:49:29,596 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:49:29 raspberrypi python3[350603]: 2025-08-05 22:49:29,596 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.backup.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,635 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,637 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4: done=False, completed=False, lock=False, meta=False
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,638 [INFO] Checking 213300-213400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=True, meta=True
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,638 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4: done=False, completed=False, lock=False, meta=False
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,639 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=False, completed=False, lock=False, meta=False
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,640 [INFO] ðŸ“Š Disk usage: 7.8% used, 101.9 GB free
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,640 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,642 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,642 [INFO] Checking 213300-213400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=True, error=False, meta=True
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,643 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:49:44 raspberrypi python3[350603]: 2025-08-05 22:49:44,644 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,676 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,677 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4: done=False, completed=False, lock=False, meta=False
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,678 [INFO] Checking 213300-213400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=True, meta=True
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,678 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4: done=False, completed=False, lock=False, meta=False
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,679 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=False, completed=False, lock=False, meta=False
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,679 [INFO] ðŸ“Š Disk usage: 7.8% used, 101.9 GB free
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,680 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,681 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,681 [INFO] Checking 213300-213400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=True, error=False, meta=True
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,681 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:49:59 raspberrypi python3[350603]: 2025-08-05 22:49:59,681 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,727 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,727 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4: done=False, completed=False, lock=False, meta=False
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,728 [INFO] Checking 213300-213400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=True, meta=True
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,728 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4: done=False, completed=False, lock=False, meta=False
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,728 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=False, completed=False, lock=False, meta=False
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,728 [INFO] ðŸ“Š Disk usage: 7.8% used, 101.8 GB free
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,728 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,728 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_left.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,730 [INFO] Checking 213300-213400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=True, error=False, meta=True
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,731 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_right.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:50:14 raspberrypi python3[350603]: 2025-08-05 22:50:14,731 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=False, completed=False, lock=False, error=False, meta=False
Aug 05 22:50:29 raspberrypi python3[350603]: 2025-08-05 22:50:29,773 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 22:50:29 raspberrypi python3[350603]: 2025-08-05 22:50:29,773 [INFO] Checking 213300-213400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=True, meta=True
Aug 05 22:50:29 raspberrypi python3[350603]: 2025-08-05 22:50:29,773 [INFO] Checking 224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=False, meta=True
Aug 05 22:50:30 raspberrypi python3[350603]: 2025-08-05 22:50:30,088 [INFO] HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.6cef537e-2d89-4d07-be67-48c021ee7d85 "HTTP/1.1 200 OK"
Aug 05 22:50:30 raspberrypi python3[350603]: 2025-08-05 22:50:30,092 [INFO] âœ… Updated booking 6cef537e-2d89-4d07-be67-48c021ee7d85 status to Processing
Aug 05 22:50:30 raspberrypi python3[350603]: 2025-08-05 22:50:30,092 [INFO] ðŸ” Validating input video format: /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 22:50:30 raspberrypi python3[350603]: 2025-08-05 22:50:30,261 [INFO] ðŸ“¹ Input video: h264 3740x1080 @ 30.0fps, yuv420p
Aug 05 22:50:30 raspberrypi python3[350603]: 2025-08-05 22:50:30,600 [INFO] HTTP Request: GET https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/user_settings?select=%2A&user_id=eq.65aa2e2a-e463-424d-b88f-0724bb0bea3a "HTTP/1.1 200 OK"
Aug 05 22:50:31 raspberrypi python3[350603]: 2025-08-05 22:50:31,324 [INFO] Re-encoding intro video to H.264 1280x720 30fps yuv420p for fast concat...
Aug 05 22:50:38 raspberrypi python3[350603]: 2025-08-05 22:50:38,618 [INFO] [Two-pass] Pass 1: Overlaying logos on main recording only...
Aug 05 22:50:38 raspberrypi python3[350603]: 2025-08-05 22:50:38,618 [INFO] Overlay filter chain: [1:v]scale=400:400:force_original_aspect_ratio=decrease,pad=400:400:(ow-iw)/2:(oh-ih)/2:color=0x00000000[mainlogo_scaled]; [0:v][mainlogo_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[mainlogo_out]; [2:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[userlogo_scaled]; [mainlogo_out][userlogo_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[userlogo_out]; [3:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor0_scaled]; [userlogo_out][sponsor0_scaled]overlay=10:main_h-overlay_h-10:format=auto[sponsor0_out]; [4:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor1_scaled]; [sponsor0_out][sponsor1_scaled]overlay=10:main_h-overlay_h-10:format=auto[sponsor1_out]; [5:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor2_scaled]; [sponsor1_out][sponsor2_scaled]overlay=(main_w-overlay_w)/2:main_h-overlay_h-10:format=auto[sponsor2_out]; [sponsor2_out]setsar=1[finalout]
Aug 05 22:50:38 raspberrypi python3[350603]: 2025-08-05 22:50:38,618 [INFO] FFmpeg command: ffmpeg -y -i /opt/ezrec-backend/recordings/2025-08-05/224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4 -i /opt/ezrec-backend/assets/ezrec_logo.png -i /opt/ezrec-backend/media_cache/65aa2e2a-e463-424d-b88f-0724bb0bea3a/logo.png -i /opt/ezrec-backend/media_cache/65aa2e2a-e463-424d-b88f-0724bb0bea3a/sponsor_logo1.png -i /opt/ezrec-backend/media_cache/65aa2e2a-e463-424d-b88f-0724bb0bea3a/sponsor_logo2.png -i /opt/ezrec-backend/media_cache/65aa2e2a-e463-424d-b88f-0724bb0bea3a/sponsor_logo3.png -filter_complex [1:v]scale=400:400:force_original_aspect_ratio=decrease,pad=400:400:(ow-iw)/2:(oh-ih)/2:color=0x00000000[mainlogo_scaled]; [0:v][mainlogo_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[mainlogo_out]; [2:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[userlogo_scaled]; [mainlogo_out][userlogo_scaled]overlay=main_w-overlay_w-10:main_h-overlay_h-10:format=auto[userlogo_out]; [3:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor0_scaled]; [userlogo_out][sponsor0_scaled]overlay=10:main_h-overlay_h-10:format=auto[sponsor0_out]; [4:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor1_scaled]; [sponsor0_out][sponsor1_scaled]overlay=10:main_h-overlay_h-10:format=auto[sponsor1_out]; [5:v]scale=120:120:force_original_aspect_ratio=decrease,pad=120:120:(ow-iw)/2:(oh-ih)/2:color=0x00000000[sponsor2_scaled]; [sponsor1_out][sponsor2_scaled]overlay=(main_w-overlay_w)/2:main_h-overlay_h-10:format=auto[sponsor2_out]; [sponsor2_out]setsar=1[finalout] -map [finalout] -c:v libx264 -preset ultrafast -crf 28 -pix_fmt yuv420p /opt/ezrec-backend/recordings/2025-08-05/main_with_logos_224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 22:51:22 raspberrypi python3[350603]: 2025-08-05 22:51:22,725 [INFO] âœ… Logo overlay completed in 44.11s
Aug 05 22:51:22 raspberrypi python3[350603]: 2025-08-05 22:51:22,725 [INFO] [Two-pass] Pass 2: Concatenating intro and logo-overlaid main video to /opt/ezrec-backend/recordings/2025-08-05/concat_224800-224900_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4
Aug 05 22:51:55 raspberrypi python3[350603]: 2025-08-05 22:51:55,159 [INFO] âœ… Concat completed in 32.43s
Aug 05 22:51:55 raspberrypi python3[350603]: 2025-08-05 22:51:55,610 [INFO] HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.6cef537e-2d89-4d07-be67-48c021ee7d85 "HTTP/1.1 200 OK"
Aug 05 22:51:55 raspberrypi python3[350603]: 2025-08-05 22:51:55,614 [INFO] âœ… Updated booking 6cef537e-2d89-4d07-be67-48c021ee7d85 status to Uploading
Aug 05 22:52:05 raspberrypi python3[350603]: 2025-08-05 22:52:05,253 [INFO] HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.6cef537e-2d89-4d07-be67-48c021ee7d85 "HTTP/1.1 200 OK"
Aug 05 22:52:05 raspberrypi python3[350603]: 2025-08-05 22:52:05,255 [INFO] âœ… Updated booking 6cef537e-2d89-4d07-be67-48c021ee7d85 status to Uploaded
Aug 05 22:52:05 raspberrypi python3[350603]: 2025-08-05 22:52:05,618 [INFO] HTTP Request: PATCH https://iszmsaayxpdrovealrrp.supabase.co/rest/v1/bookings?id=eq.6cef537e-2d89-4d07-be67-48c021ee7d85 "HTTP/1.1 200 OK"
Aug 05 22:52:05 raspberrypi python3[350603]: 2025-08-05 22:52:05,619 [INFO] âœ… Updated booking 6cef537e-2d89-4d07-be67-48c021ee7d85 status to Completed
Aug 05 22:52:05 raspberrypi python3[350603]: 2025-08-05 22:52:05,619 [INFO] ðŸ—‘ï¸ Removed completed booking 6cef537e-2d89-4d07-be67-48c021ee7d85 from cache (video_worker)
Aug 05 22:52:05 raspberrypi python3[350603]: 2025-08-05 22:52:05,619 [INFO] ðŸ“Š Disk usage: 7.8% used, 101.9 GB free
Aug 05 22:52:05 raspberrypi python3[350603]: 2025-08-05 22:52:05,620 [INFO] Scanning directory: /opt/ezrec-backend/recordings/2025-08-05
Aug 05 22:52:05 raspberrypi python3[350603]: 2025-08-05 22:52:05,620 [INFO] Checking 213300-213400_65aa2e2a-e463-424d-b88f-0724bb0bea3a_d217e751-dfa5-5276-abbb-da5ad6c2626a_merged.mp4: done=True, completed=False, lock=True, error=False, meta=True
